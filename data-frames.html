<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>11&nbsp; Data Frames – Programming for Analytics in R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./data-wrangling.html" rel="next">
<link href="./data-analysis.html" rel="prev">
<link href="./cover.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-ae9c50c8c79159b126e2153c26109f93.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./data-analysis.html">Data Analysis</a></li><li class="breadcrumb-item"><a href="./data-frames.html"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Data Frames</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Programming for Analytics in R</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/jhelvy/p4a/" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./programming.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Programming</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./getting-started.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Getting Started</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./operators-data-types.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Operators &amp; Data Types</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./functions-packages.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Functions &amp; Packages</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./creating-functions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Creating Functions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./conditionals.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Conditionals</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./testing-debugging.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Testing &amp; Debugging</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./iteration.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Iteration</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./vectors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Vectors</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./strings.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Strings</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./data-analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Analysis</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data-frames.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Data Frames</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data-wrangling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Data Wrangling</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data-visualization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Data Visualization</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./extensions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Extensions</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./monte-carlo-methods.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Monte Carlo Methods</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./python-in-r.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Introduction to Python (in R)</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#the-data-frame" id="toc-the-data-frame" class="nav-link active" data-scroll-target="#the-data-frame"><span class="header-section-number">11.1</span> The data frame</a>
  <ul class="collapse">
  <li><a href="#what-are-data-frames" id="toc-what-are-data-frames" class="nav-link" data-scroll-target="#what-are-data-frames"><span class="header-section-number">11.1.1</span> What are data frames?</a></li>
  <li><a href="#the-data.frame-function" id="toc-the-data.frame-function" class="nav-link" data-scroll-target="#the-data.frame-function"><span class="header-section-number">11.1.2</span> The <code>data.frame()</code> function</a></li>
  <li><a href="#the-tibble-function" id="toc-the-tibble-function" class="nav-link" data-scroll-target="#the-tibble-function"><span class="header-section-number">11.1.3</span> The <code>tibble()</code> function</a></li>
  <li><a href="#dimensions" id="toc-dimensions" class="nav-link" data-scroll-target="#dimensions"><span class="header-section-number">11.1.4</span> Dimensions</a></li>
  <li><a href="#row-and-column-names" id="toc-row-and-column-names" class="nav-link" data-scroll-target="#row-and-column-names"><span class="header-section-number">11.1.5</span> Row and column names</a></li>
  <li><a href="#combining-data-frames" id="toc-combining-data-frames" class="nav-link" data-scroll-target="#combining-data-frames"><span class="header-section-number">11.1.6</span> Combining data frames</a></li>
  </ul></li>
  <li><a href="#accessing-elements" id="toc-accessing-elements" class="nav-link" data-scroll-target="#accessing-elements"><span class="header-section-number">11.2</span> Accessing elements</a>
  <ul class="collapse">
  <li><a href="#using-the-operator" id="toc-using-the-operator" class="nav-link" data-scroll-target="#using-the-operator"><span class="header-section-number">11.2.1</span> Using the <code>$</code> operator</a></li>
  <li><a href="#using-integer-indices" id="toc-using-integer-indices" class="nav-link" data-scroll-target="#using-integer-indices"><span class="header-section-number">11.2.2</span> Using integer indices</a></li>
  <li><a href="#using-character-indices" id="toc-using-character-indices" class="nav-link" data-scroll-target="#using-character-indices"><span class="header-section-number">11.2.3</span> Using character indices</a></li>
  <li><a href="#using-logical-indices" id="toc-using-logical-indices" class="nav-link" data-scroll-target="#using-logical-indices"><span class="header-section-number">11.2.4</span> Using logical indices</a></li>
  <li><a href="#modifying-data-frames" id="toc-modifying-data-frames" class="nav-link" data-scroll-target="#modifying-data-frames"><span class="header-section-number">11.2.5</span> Modifying data frames</a></li>
  </ul></li>
  <li><a href="#dealing-with-actual-data" id="toc-dealing-with-actual-data" class="nav-link" data-scroll-target="#dealing-with-actual-data"><span class="header-section-number">11.3</span> Dealing with actual data</a>
  <ul class="collapse">
  <li><a href="#r-setup" id="toc-r-setup" class="nav-link" data-scroll-target="#r-setup"><span class="header-section-number">11.3.1</span> R Setup</a></li>
  <li><a href="#method-1-loading-data-from-a-package" id="toc-method-1-loading-data-from-a-package" class="nav-link" data-scroll-target="#method-1-loading-data-from-a-package"><span class="header-section-number">11.3.2</span> Method 1: Loading data from a package</a></li>
  <li><a href="#method-2-importing-data" id="toc-method-2-importing-data" class="nav-link" data-scroll-target="#method-2-importing-data"><span class="header-section-number">11.3.3</span> Method 2: Importing data</a></li>
  <li><a href="#previewing-the-data" id="toc-previewing-the-data" class="nav-link" data-scroll-target="#previewing-the-data"><span class="header-section-number">11.3.4</span> Previewing the data</a></li>
  </ul></li>
  <li><a href="#now-what" id="toc-now-what" class="nav-link" data-scroll-target="#now-what"><span class="header-section-number">11.4</span> Now what?</a></li>
  <li><a href="#page-sources" id="toc-page-sources" class="nav-link" data-scroll-target="#page-sources">Page sources</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/jhelvy/p4a/edit/main/data-frames.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/jhelvy/p4a/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./data-analysis.html">Data Analysis</a></li><li class="breadcrumb-item"><a href="./data-frames.html"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Data Frames</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span id="sec-data-frames" class="quarto-section-identifier"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Data Frames</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<blockquote class="blockquote">
<h3 id="learning-objectives" class="unnumbered anchored">Learning Objectives</h3>
<ul>
<li>Describe what a data frame is.</li>
<li>Create data frames.</li>
<li>Use indexing to subset and modify specific portions of data frames.</li>
<li>Load external data from a .csv file into a data frame.</li>
<li>Summarize the contents of a data frame.</li>
</ul>
<h3 id="suggested-readings" class="unnumbered anchored">Suggested Readings</h3>
<ul>
<li><a href="https://www.datacamp.com/community/tutorials/intro-data-frame-r">“Introduction to Data frames in R”</a> Data Camp article, by Ryan Sheehy</li>
<li><a href="https://r4ds.had.co.nz/tibbles.html">Chapter 10</a> of “R for Data Science”, by Garrett Grolemund and Hadley Wickham</li>
<li><a href="https://rstudio-education.github.io/hopr/r-objects.html#data-frames">Chapters 5.8 - 5.11</a> of “Hands-On Programming with R”, by Garrett Grolemund</li>
</ul>
</blockquote>
<section id="the-data-frame" class="level2" data-number="11.1">
<h2 data-number="11.1" class="anchored" data-anchor-id="the-data-frame"><span class="header-section-number">11.1</span> The data frame</h2>
<section id="what-are-data-frames" class="level3" data-number="11.1.1">
<h3 data-number="11.1.1" class="anchored" data-anchor-id="what-are-data-frames"><span class="header-section-number">11.1.1</span> What are data frames?</h3>
<p>Data frames are the <em>de facto</em> data structure for most tabular data in R. A data frame can be created by hand, but most commonly they are generated by reading in a data file (typically a <code>.csv</code> file).</p>
<p>A data frame is the representation of data in the format of a table where the columns are <strong>vectors</strong> of the same length. Because columns are vectors, each column must contain a single type of data (e.g., numeric, character, integer, logical). For example, here is a figure depicting a data frame comprising a numeric, a character, and a logical vector:</p>
<p><img src="./images/data-frame.png" class="img-fluid"></p>
</section>
<section id="the-data.frame-function" class="level3" data-number="11.1.2">
<h3 data-number="11.1.2" class="anchored" data-anchor-id="the-data.frame-function"><span class="header-section-number">11.1.2</span> The <code>data.frame()</code> function</h3>
<p>You can create a data frame using the <code>data.frame()</code> function. Here is an example using of members of the Beatles band:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>beatles <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">firstName   =</span> <span class="fu">c</span>(<span class="st">"John"</span>, <span class="st">"Paul"</span>, <span class="st">"Ringo"</span>, <span class="st">"George"</span>),</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">lastName    =</span> <span class="fu">c</span>(<span class="st">"Lennon"</span>, <span class="st">"McCartney"</span>, <span class="st">"Starr"</span>, <span class="st">"Harrison"</span>),</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">instrument  =</span> <span class="fu">c</span>(<span class="st">"guitar"</span>, <span class="st">"bass"</span>, <span class="st">"drums"</span>, <span class="st">"guitar"</span>),</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">yearOfBirth =</span> <span class="fu">c</span>(<span class="dv">1940</span>, <span class="dv">1942</span>, <span class="dv">1940</span>, <span class="dv">1943</span>),</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">deceased    =</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>beatles</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;   firstName  lastName instrument yearOfBirth deceased
#&gt; 1      John    Lennon     guitar        1940     TRUE
#&gt; 2      Paul McCartney       bass        1942    FALSE
#&gt; 3     Ringo     Starr      drums        1940    FALSE
#&gt; 4    George  Harrison     guitar        1943     TRUE</code></pre>
</div>
</div>
<p>Notice how the data frame is created - you just hand the <code>data.frame()</code> function a bunch of vectors! This should hopefully help make it clear that a data frame is indeed a series of same-length vectors structured side-by-side.</p>
</section>
<section id="the-tibble-function" class="level3" data-number="11.1.3">
<h3 data-number="11.1.3" class="anchored" data-anchor-id="the-tibble-function"><span class="header-section-number">11.1.3</span> The <code>tibble()</code> function</h3>
<p>The <a href="https://r4ds.had.co.nz/tibbles.html">tibble</a> is an improved version of the Base R data frame, and it comes from the <strong>dplyr</strong> library (which we’ll get into next lesson). If you haven’t already, go ahead and install and load the <strong>dplyr</strong> library now:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>A tibble works just like a data frame, but it has a few small features that make it a bit more useful - to the extent that from here on, we will be using tibbles as our default data frame structure. With this in mind, I’ll often use the term “data frame” to refer to both tibbles and data frames, since they serve the same purpose as a data structure.</p>
<p>Just like with data frames, you can create a tibble using the <code>tibble()</code> function. Here’s the same example as before with the Beatles band:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>beatles <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">firstName   =</span> <span class="fu">c</span>(<span class="st">"John"</span>, <span class="st">"Paul"</span>, <span class="st">"Ringo"</span>, <span class="st">"George"</span>),</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">lastName    =</span> <span class="fu">c</span>(<span class="st">"Lennon"</span>, <span class="st">"McCartney"</span>, <span class="st">"Starr"</span>, <span class="st">"Harrison"</span>),</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">instrument  =</span> <span class="fu">c</span>(<span class="st">"guitar"</span>, <span class="st">"bass"</span>, <span class="st">"drums"</span>, <span class="st">"guitar"</span>),</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">yearOfBirth =</span> <span class="fu">c</span>(<span class="dv">1940</span>, <span class="dv">1942</span>, <span class="dv">1940</span>, <span class="dv">1943</span>),</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">deceased    =</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>)</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>beatles</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 4 × 5
#&gt;   firstName lastName  instrument yearOfBirth deceased
#&gt;   &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;            &lt;dbl&gt; &lt;lgl&gt;   
#&gt; 1 John      Lennon    guitar            1940 TRUE    
#&gt; 2 Paul      McCartney bass              1942 FALSE   
#&gt; 3 Ringo     Starr     drums             1940 FALSE   
#&gt; 4 George    Harrison  guitar            1943 TRUE</code></pre>
</div>
</div>
<p>Here we can see a couple of the differences that make tibbles a bit more intuitive to use:</p>
<ol type="1">
<li>It’s easier to see what type of data each column is because tibbles display this in between the <code>&lt;&gt;</code> symbols under each column name.</li>
<li>A tibble will only print the first few rows of data when you enter the object name. In contrast, data frames will try to print <em>the entire</em> data frame (which is super annoying when you have a data frame with millions of rows of data). Here, we only have 4 rows, so this difference is not apparent.</li>
<li>Columns of class <code>character</code> are never converted into factors (don’t worry about this for now…just know that keeping strings as a <code>character</code> class generally makes life easier in R).</li>
</ol>
<p>Now that we have a data frame (tibble) defined, let’s see what we can do with it!</p>
</section>
<section id="dimensions" class="level3" data-number="11.1.4">
<h3 data-number="11.1.4" class="anchored" data-anchor-id="dimensions"><span class="header-section-number">11.1.4</span> Dimensions</h3>
<p>You can get the dimensions of a data frame using the <code>ncol()</code>, <code>nrow()</code>, and <code>dim()</code> functions:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(beatles) <span class="co"># Returns the number of rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] 4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ncol</span>(beatles) <span class="co"># Returns the number of columns</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(beatles) <span class="co"># Returns a vector of the number rows and columns</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] 4 5</code></pre>
</div>
</div>
</section>
<section id="row-and-column-names" class="level3" data-number="11.1.5">
<h3 data-number="11.1.5" class="anchored" data-anchor-id="row-and-column-names"><span class="header-section-number">11.1.5</span> Row and column names</h3>
<p>Data frames <strong>must</strong> have column names, but row names are optional (by default, row names are just a sequence of numbers). The <code>names()</code> function returns the column names, or you can also be more specific and use the <code>colnames()</code> and <code>rownames()</code> functions:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(beatles) <span class="co"># Returns a vector of the column names</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "firstName"   "lastName"    "instrument"  "yearOfBirth" "deceased"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(beatles) <span class="co"># Also returns a vector of the column names</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "firstName"   "lastName"    "instrument"  "yearOfBirth" "deceased"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(beatles) <span class="co"># Returns a vector of the row names</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "1" "2" "3" "4"</code></pre>
</div>
</div>
</section>
<section id="combining-data-frames" class="level3" data-number="11.1.6">
<h3 data-number="11.1.6" class="anchored" data-anchor-id="combining-data-frames"><span class="header-section-number">11.1.6</span> Combining data frames</h3>
<p>You can combine data frames using the <code>bind_cols()</code> and <code>bind_rows()</code> functions:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine columns</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>names <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">firstName =</span> <span class="fu">c</span>(<span class="st">"John"</span>, <span class="st">"Paul"</span>, <span class="st">"Ringo"</span>, <span class="st">"George"</span>),</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">lastName  =</span> <span class="fu">c</span>(<span class="st">"Lennon"</span>, <span class="st">"McCartney"</span>, <span class="st">"Starr"</span>, <span class="st">"Harrison"</span>)</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>instruments <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">instrument =</span> <span class="fu">c</span>(<span class="st">"guitar"</span>, <span class="st">"bass"</span>, <span class="st">"drums"</span>, <span class="st">"guitar"</span>)</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="fu">bind_cols</span>(names, instruments)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 4 × 3
#&gt;   firstName lastName  instrument
#&gt;   &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;     
#&gt; 1 John      Lennon    guitar    
#&gt; 2 Paul      McCartney bass      
#&gt; 3 Ringo     Starr     drums     
#&gt; 4 George    Harrison  guitar</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine rows</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>members1 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">firstName =</span> <span class="fu">c</span>(<span class="st">"John"</span>, <span class="st">"Paul"</span>),</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">lastName  =</span> <span class="fu">c</span>(<span class="st">"Lennon"</span>, <span class="st">"McCartney"</span>)</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>members2 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">firstName =</span> <span class="fu">c</span>(<span class="st">"Ringo"</span>, <span class="st">"George"</span>),</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">lastName  =</span> <span class="fu">c</span>(<span class="st">"Starr"</span>, <span class="st">"Harrison"</span>)</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a><span class="fu">bind_rows</span>(members1, members2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 4 × 2
#&gt;   firstName lastName 
#&gt;   &lt;chr&gt;     &lt;chr&gt;    
#&gt; 1 John      Lennon   
#&gt; 2 Paul      McCartney
#&gt; 3 Ringo     Starr    
#&gt; 4 George    Harrison</code></pre>
</div>
</div>
<p>Note that to combine rows, the column names must be the same. For example, if we change the second column name in <code>members2</code> to <code>"LASTNAME"</code>, you’ll get a data frame with three columns, two of which will have missing values:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(members2) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"firstName"</span>, <span class="st">"LASTNAME"</span>)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">bind_rows</span>(members1, members2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 4 × 3
#&gt;   firstName lastName  LASTNAME
#&gt;   &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;   
#&gt; 1 John      Lennon    &lt;NA&gt;    
#&gt; 2 Paul      McCartney &lt;NA&gt;    
#&gt; 3 Ringo     &lt;NA&gt;      Starr   
#&gt; 4 George    &lt;NA&gt;      Harrison</code></pre>
</div>
</div>
</section>
</section>
<section id="accessing-elements" class="level2" data-number="11.2">
<h2 data-number="11.2" class="anchored" data-anchor-id="accessing-elements"><span class="header-section-number">11.2</span> Accessing elements</h2>
<section id="using-the-operator" class="level3" data-number="11.2.1">
<h3 data-number="11.2.1" class="anchored" data-anchor-id="using-the-operator"><span class="header-section-number">11.2.1</span> Using the <code>$</code> operator</h3>
<p>You can extract columns from a data frame by name by using the <code>$</code> operator plus the column name. For example, the <code>instrument</code> column can be accessed using <code>beatles$instrument</code>:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>beatles<span class="sc">$</span>instrument</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "guitar" "bass"   "drums"  "guitar"</code></pre>
</div>
</div>
</section>
<section id="using-integer-indices" class="level3" data-number="11.2.2">
<h3 data-number="11.2.2" class="anchored" data-anchor-id="using-integer-indices"><span class="header-section-number">11.2.2</span> Using integer indices</h3>
<p>You can access elements in a data frame using brackets <code>[]</code> and indices inside the brackets. The general form is:</p>
<pre><code>DF[ROWS, COLUMNS]</code></pre>
<p>To index with integers, specify the row numbers and column numbers as vectors.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>beatles[<span class="dv">1</span>, <span class="dv">2</span>] <span class="co"># Select the element in row 1, column 2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 1 × 1
#&gt;   lastName
#&gt;   &lt;chr&gt;   
#&gt; 1 Lennon</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>beatles[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>)] <span class="co"># Select the elements in rows 1 &amp; 2 and columns 2 &amp; 3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 2 × 2
#&gt;   lastName  instrument
#&gt;   &lt;chr&gt;     &lt;chr&gt;     
#&gt; 1 Lennon    guitar    
#&gt; 2 McCartney bass</code></pre>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>beatles[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>] <span class="co"># Same thing, but using the ":" operator</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 2 × 2
#&gt;   lastName  instrument
#&gt;   &lt;chr&gt;     &lt;chr&gt;     
#&gt; 1 Lennon    guitar    
#&gt; 2 McCartney bass</code></pre>
</div>
</div>
<p>If you leave either the row or column index blank, it means “selects all”:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>beatles[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>),] <span class="co"># Leaving the column index blank will select all columns</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 2 × 5
#&gt;   firstName lastName  instrument yearOfBirth deceased
#&gt;   &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;            &lt;dbl&gt; &lt;lgl&gt;   
#&gt; 1 John      Lennon    guitar            1940 TRUE    
#&gt; 2 Paul      McCartney bass              1942 FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>beatles[,<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>)] <span class="co"># Leaving the row index blank will select all rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 4 × 2
#&gt;   firstName lastName 
#&gt;   &lt;chr&gt;     &lt;chr&gt;    
#&gt; 1 John      Lennon   
#&gt; 2 Paul      McCartney
#&gt; 3 Ringo     Starr    
#&gt; 4 George    Harrison</code></pre>
</div>
</div>
<p>You can also use negative integers to specify rows or columns to be excluded:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>beatles[<span class="sc">-</span><span class="dv">1</span>, ] <span class="co"># Select all rows and except the first</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 3 × 5
#&gt;   firstName lastName  instrument yearOfBirth deceased
#&gt;   &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;            &lt;dbl&gt; &lt;lgl&gt;   
#&gt; 1 Paul      McCartney bass              1942 FALSE   
#&gt; 2 Ringo     Starr     drums             1940 FALSE   
#&gt; 3 George    Harrison  guitar            1943 TRUE</code></pre>
</div>
</div>
</section>
<section id="using-character-indices" class="level3" data-number="11.2.3">
<h3 data-number="11.2.3" class="anchored" data-anchor-id="using-character-indices"><span class="header-section-number">11.2.3</span> Using character indices</h3>
<p>You can use the column names to select elements in a data frame. If you do not include a <code>,</code> to designate which rows to select, R will return all the rows for the selected columns:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>beatles[<span class="fu">c</span>(<span class="st">'firstName'</span>, <span class="st">'lastName'</span>)] <span class="co"># Select all rows for the "firstName" and "lastName" columns</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 4 × 2
#&gt;   firstName lastName 
#&gt;   &lt;chr&gt;     &lt;chr&gt;    
#&gt; 1 John      Lennon   
#&gt; 2 Paul      McCartney
#&gt; 3 Ringo     Starr    
#&gt; 4 George    Harrison</code></pre>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>beatles[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="fu">c</span>(<span class="st">'firstName'</span>, <span class="st">'lastName'</span>)] <span class="co"># Select just the first two rows for the "firstName" and "lastName" columns</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 2 × 2
#&gt;   firstName lastName 
#&gt;   &lt;chr&gt;     &lt;chr&gt;    
#&gt; 1 John      Lennon   
#&gt; 2 Paul      McCartney</code></pre>
</div>
</div>
</section>
<section id="using-logical-indices" class="level3" data-number="11.2.4">
<h3 data-number="11.2.4" class="anchored" data-anchor-id="using-logical-indices"><span class="header-section-number">11.2.4</span> Using logical indices</h3>
<p>When using a logical vector for indexing, the position where the logical vector is <code>TRUE</code> is returned. This is helpful for filtering data frame rows based on conditions. For example, if you wanted to filter out the rows for which Beatles members were still alive, you could first create a logical vector using the <code>deceased</code> column:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>beatles<span class="sc">$</span>deceased <span class="sc">==</span> <span class="cn">FALSE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] FALSE  TRUE  TRUE FALSE</code></pre>
</div>
</div>
<p>Then, you could insert this logical vector in the row position of the <code>[]</code> brackets to filter only the rows that are <code>TRUE</code>:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>beatles[beatles<span class="sc">$</span>deceased <span class="sc">==</span> <span class="cn">FALSE</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 2 × 5
#&gt;   firstName lastName  instrument yearOfBirth deceased
#&gt;   &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;            &lt;dbl&gt; &lt;lgl&gt;   
#&gt; 1 Paul      McCartney bass              1942 FALSE   
#&gt; 2 Ringo     Starr     drums             1940 FALSE</code></pre>
</div>
</div>
</section>
<section id="modifying-data-frames" class="level3" data-number="11.2.5">
<h3 data-number="11.2.5" class="anchored" data-anchor-id="modifying-data-frames"><span class="header-section-number">11.2.5</span> Modifying data frames</h3>
<p>You can use any of the above methods for accessing elements in a data frame to also modify those elements using the assignment operator (<code>&lt;-</code>). In addition to using brackets to modify specific elements, you can use the <code>$</code> operator to create new columns in a data frame.</p>
<p>For example, let’s create the variable <code>age</code> by subtracting the <code>yearOfBirth</code> variable from the current year:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>beatles<span class="sc">$</span>age <span class="ot">&lt;-</span> <span class="dv">2019</span> <span class="sc">-</span> beatles<span class="sc">$</span>yearOfBirth</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>beatles</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 4 × 6
#&gt;   firstName lastName  instrument yearOfBirth deceased   age
#&gt;   &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;            &lt;dbl&gt; &lt;lgl&gt;    &lt;dbl&gt;
#&gt; 1 John      Lennon    guitar            1940 TRUE        79
#&gt; 2 Paul      McCartney bass              1942 FALSE       77
#&gt; 3 Ringo     Starr     drums             1940 FALSE       79
#&gt; 4 George    Harrison  guitar            1943 TRUE        76</code></pre>
</div>
</div>
<p>You can also make a new column of all the same value by just providing one value:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>beatles<span class="sc">$</span>hometown <span class="ot">&lt;-</span> <span class="st">'Liverpool'</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>beatles</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 4 × 7
#&gt;   firstName lastName  instrument yearOfBirth deceased   age hometown 
#&gt;   &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;            &lt;dbl&gt; &lt;lgl&gt;    &lt;dbl&gt; &lt;chr&gt;    
#&gt; 1 John      Lennon    guitar            1940 TRUE        79 Liverpool
#&gt; 2 Paul      McCartney bass              1942 FALSE       77 Liverpool
#&gt; 3 Ringo     Starr     drums             1940 FALSE       79 Liverpool
#&gt; 4 George    Harrison  guitar            1943 TRUE        76 Liverpool</code></pre>
</div>
</div>
</section>
</section>
<section id="dealing-with-actual-data" class="level2" data-number="11.3">
<h2 data-number="11.3" class="anchored" data-anchor-id="dealing-with-actual-data"><span class="header-section-number">11.3</span> Dealing with actual data</h2>
<p>Now that we know what a data frame is, let’s start working with actual data! We are going to use the <code>msleep</code> dataset, which contains data on sleep times and weights of different mammals. The data are taken from <a href="https://www.pnas.org/content/104/3/1051.long">V. M. Savage and G. B. West. “A quantitative, theoretical framework for understanding mammalian sleep.” <em>Proceedings of the National Academy of Sciences</em>, 104 (3):1051-1056, 2007.</a>.</p>
<p>The dataset is stored as a comma separated value (CSV) file. Each row holds information for a single animal, and the columns represent:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Column Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>name</td>
<td>Common name</td>
</tr>
<tr class="even">
<td>genus</td>
<td>The taxonomic genus of animal</td>
</tr>
<tr class="odd">
<td>vore</td>
<td>Carnivore, omnivore or herbivore?</td>
</tr>
<tr class="even">
<td>order</td>
<td>The taxonomic order of animal</td>
</tr>
<tr class="odd">
<td>conservation</td>
<td>The conservation status of the animal</td>
</tr>
<tr class="even">
<td>sleep_total</td>
<td>Total amount of sleep, in hours</td>
</tr>
<tr class="odd">
<td>sleep_rem</td>
<td>REM sleep, in hours</td>
</tr>
<tr class="even">
<td>sleep_cycle</td>
<td>Length of sleep cycle, in hours</td>
</tr>
<tr class="odd">
<td>awake</td>
<td>Amount of time spent awake, in hours</td>
</tr>
<tr class="even">
<td>brainwt</td>
<td>Brain weight in kilograms</td>
</tr>
<tr class="odd">
<td>bodywt</td>
<td>Body weight in kilograms</td>
</tr>
</tbody>
</table>
<section id="r-setup" class="level3" data-number="11.3.1">
<h3 data-number="11.3.1" class="anchored" data-anchor-id="r-setup"><span class="header-section-number">11.3.1</span> R Setup</h3>
<p>Before we dig into the data, let’s prepare our analysis environment by following these steps:</p>
<ol type="1">
<li>Create a new R Project called “data_analysis_tutorial” and save the folder somewhere on your computer (see the <a href="getting-started.html#rstudio-projects">“RStudio projects”</a> section from lesson 1 if you’re not sure what this is). This will create a folder called “data_analysis_tutorial” and also a <code>data_analysis_tutorial.RProj</code> file inside that folder.</li>
<li>Create a new <code>.R</code> file (File &gt; New File &gt; R Script), and save it as <code>data_frames.R</code> inside your “data_analysis_tutorial” folder. From here on, we’ll type all code for this lesson inside this <code>data_frames.R</code> file.</li>
<li>Create another folder in your R Project folder called “data” - we’ll put data in this folder real soon.</li>
</ol>
<p>Now that you’ve gotten your setup organized, go ahead and open the <code>data_analysis_tutorial.RProj</code> file to open RStudio, then click on the <code>data_frames.R</code> file. We’ll write code in this file.</p>
<p>There are generally two ways to load external data.</p>
</section>
<section id="method-1-loading-data-from-a-package" class="level3" data-number="11.3.2">
<h3 data-number="11.3.2" class="anchored" data-anchor-id="method-1-loading-data-from-a-package"><span class="header-section-number">11.3.2</span> Method 1: Loading data from a package</h3>
<p>Many R packages come with pre-loaded datasets. For example, the <strong>ggplot2</strong> library (which we’ll <a href="data-visualization.html">use soon</a> to make plots in R) comes with the <code>msleep</code> dataset already loaded. To see this, install <strong>ggplot2</strong> and load the library:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("ggplot2") # Do this only once!</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(msleep) <span class="co"># Preview just the first 6 rows of the data frame</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 6 × 11
#&gt;   name       genus vore  order conservation sleep_total sleep_rem sleep_cycle
#&gt;   &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;              &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;
#&gt; 1 Cheetah    Acin… carni Carn… lc                  12.1      NA        NA    
#&gt; 2 Owl monkey Aotus omni  Prim… &lt;NA&gt;                17         1.8      NA    
#&gt; 3 Mountain … Aplo… herbi Rode… nt                  14.4       2.4      NA    
#&gt; 4 Greater s… Blar… omni  Sori… lc                  14.9       2.3       0.133
#&gt; 5 Cow        Bos   herbi Arti… domesticated         4         0.7       0.667
#&gt; 6 Three-toe… Brad… herbi Pilo… &lt;NA&gt;                14.4       2.2       0.767
#&gt; # ℹ 3 more variables: awake &lt;dbl&gt;, brainwt &lt;dbl&gt;, bodywt &lt;dbl&gt;</code></pre>
</div>
</div>
<p>If you want to see all of the different datasets that any particular package contains, you can call the <code>data()</code> function after loading a library. For example, here are all the dataset that are contained in the <strong>ggplot2</strong> library:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="at">package =</span> <span class="st">"ggplot2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<pre><code>Data sets in package 'ggplot2':

diamonds                Prices of 50,000 round cut diamonds
economics               US economic time series
economics_long          US economic time series
faithfuld               2d density estimate of Old Faithful data
luv_colours             'colors()' in Luv space
midwest                 Midwest demographics
mpg                     Fuel economy data from 1999 and 2008 for 38
                        popular models of car
msleep                  An updated and expanded version of the mammals
                        sleep dataset
presidential            Terms of 11 presidents from Eisenhower to Obama
seals                   Vector field of seal movements
txhousing               Housing sales in TX</code></pre>
</section>
<section id="method-2-importing-data" class="level3" data-number="11.3.3">
<h3 data-number="11.3.3" class="anchored" data-anchor-id="method-2-importing-data"><span class="header-section-number">11.3.3</span> Method 2: Importing data</h3>
<p>What do you do when a dataset isn’t available from a package? Well, you can “read” the data into R from an external file. One of the most common format for storing tabular data (i.e.&nbsp;data that is stored as rows and columns) is the comma separated value (CSV) file.</p>
<p>To try this out yourself, download <a href="https://raw.githubusercontent.com/jhelvy/p4a/main/data/msleep.csv">this msleep.csv file</a> (click the link, then go to “File -&gt; Save” to save it) and put the file in your “data” folder that you created inside your “data_analysis_tutorial” folder.</p>
<p><strong>Note</strong>:</p>
<ul>
<li><strong>DO NOT</strong> double-click the <code>msleep.csv</code> file!</li>
<li><strong>DO NOT</strong> open it in Excel!</li>
</ul>
<p>We are going to read this data into R, so fight the temptation to open it in any other program!</p>
<section id="steps-to-importing-external-data-files" class="level4" data-number="11.3.3.1">
<h4 data-number="11.3.3.1" class="anchored" data-anchor-id="steps-to-importing-external-data-files"><span class="header-section-number">11.3.3.1</span> Steps to importing external data files</h4>
<ol type="1">
<li>Create a path to the data</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; here() starts at /Users/runner/work/p4a/p4a</code></pre>
</div>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>pathToData <span class="ot">&lt;-</span> <span class="fu">here</span>(<span class="st">'data'</span>, <span class="st">'data.csv'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="2" type="1">
<li>Import the data</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(pathToData)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s break these steps down. First, I <strong>strongly</strong> recommend that you create the path to the data using the <strong>here</strong> package. The <code>here()</code> function builds the path to your current <em>working directory</em> (this is where your <code>data_analysis_tutorial.Rproj</code> file lives!). For example, if I put my “data analysis tutorial” folder on my computer’s desktop and opened up the <code>data_analysis_tutorial.Rproj</code> file, this is what the <code>here()</code> function would produce:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">here</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<pre><code>"/Users/jhelvy/Desktop/data_analysis_tutorial"</code></pre>
<p>The specific path will look different depending on where you put your project, and that’s what is so powerful! Now I can run this code on <strong>any</strong> computer and I’ll get a dynamically-generated path!</p>
<p>The arguments I give to the <code>here()</code> function are the sequence of folders and files that are inside my working directory. Since I put the <code>msleep.csv</code> file inside a folder called “data”, I can get the path to that file like this:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>pathToData <span class="ot">&lt;-</span> <span class="fu">here</span>(<span class="st">'data'</span>, <span class="st">'msleep.csv'</span>)</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>pathToData</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<pre><code>"/Users/jhelvy/Desktop/data_analysis_tutorial/data/msleep.csv"</code></pre>
<p><strong>Note</strong>: Avoid hard-coding file paths (e.g.&nbsp;<code>'data/msleep.csv'</code>)!</p>
<p>This can break on different computers 💩💩💩</p>
<p>File paths create so many issues that the brilliant <a href="https://github.com/allisonhorst/stats-illustrations">Allison Horst</a> even made this lovely art to remind us about the joy of the <strong>here</strong> package 😄</p>
<p><img src="images/horst_monsters_here.png" width="500"></p>
<p>Once you’ve got your file path, you are now ready to load the data! The Base R function for reading in a csv file is called <code>read.csv()</code>, but it has some quirky aspects in how it formats the data (in particular, character variables). So instead we are going to use an improved function, <code>read_csv()</code>, from the <code>readr</code> package.</p>
<p>First, install the readr package if you haven’t already:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"readr"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now load the data:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>msleep <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">here</span>(<span class="st">'data'</span>, <span class="st">'msleep.csv'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>#&gt; Rows: 83 Columns: 11
#&gt; ── Column specification ─────────────────────────────────────────────────────
#&gt; Delimiter: ","
#&gt; chr (5): name, genus, vore, order, conservation
#&gt; dbl (6): sleep_total, sleep_rem, sleep_cycle, awake, brainwt, bodywt
#&gt; 
#&gt; ℹ Use `spec()` to retrieve the full column specification for this data.
#&gt; ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
<p>R tells us that we’ve successfully read in some data and a quick summary of the data type for each column in the dataset.</p>
</section>
</section>
<section id="previewing-the-data" class="level3" data-number="11.3.4">
<h3 data-number="11.3.4" class="anchored" data-anchor-id="previewing-the-data"><span class="header-section-number">11.3.4</span> Previewing the data</h3>
<p>You can view the entire dataset in a tabular format (similar to how Excel looks) by using the <code>View()</code> function, which opens up another tab to view the data. Note that you cannot modify the data this way - you can just look at it:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(msleep)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In addition to viewing the whole dataset with <code>View()</code>, you can quickly view summaries of the data frame with a few convenient functions. For example, you can look at the first 6 rows by using the <code>head()</code> function:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(msleep)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 6 × 11
#&gt;   name       genus vore  order conservation sleep_total sleep_rem sleep_cycle
#&gt;   &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;              &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;
#&gt; 1 Cheetah    Acin… carni Carn… lc                  12.1      NA        NA    
#&gt; 2 Owl monkey Aotus omni  Prim… &lt;NA&gt;                17         1.8      NA    
#&gt; 3 Mountain … Aplo… herbi Rode… nt                  14.4       2.4      NA    
#&gt; 4 Greater s… Blar… omni  Sori… lc                  14.9       2.3       0.133
#&gt; 5 Cow        Bos   herbi Arti… domesticated         4         0.7       0.667
#&gt; 6 Three-toe… Brad… herbi Pilo… &lt;NA&gt;                14.4       2.2       0.767
#&gt; # ℹ 3 more variables: awake &lt;dbl&gt;, brainwt &lt;dbl&gt;, bodywt &lt;dbl&gt;</code></pre>
</div>
</div>
<p>Similarly, you can view the <em>last</em> 6 rows by using the <code>tail()</code> function:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(msleep)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; # A tibble: 6 × 11
#&gt;   name       genus vore  order conservation sleep_total sleep_rem sleep_cycle
#&gt;   &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;              &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;
#&gt; 1 Tenrec     Tenr… omni  Afro… &lt;NA&gt;                15.6       2.3      NA    
#&gt; 2 Tree shrew Tupa… omni  Scan… &lt;NA&gt;                 8.9       2.6       0.233
#&gt; 3 Bottle-no… Turs… carni Ceta… &lt;NA&gt;                 5.2      NA        NA    
#&gt; 4 Genet      Gene… carni Carn… &lt;NA&gt;                 6.3       1.3      NA    
#&gt; 5 Arctic fox Vulp… carni Carn… &lt;NA&gt;                12.5      NA        NA    
#&gt; 6 Red fox    Vulp… carni Carn… &lt;NA&gt;                 9.8       2.4       0.35 
#&gt; # ℹ 3 more variables: awake &lt;dbl&gt;, brainwt &lt;dbl&gt;, bodywt &lt;dbl&gt;</code></pre>
</div>
</div>
<p>You can also view an overview summary of each column and it’s data types by using the <code>str()</code> or <code>glimpse()</code> functions (these both do the same thing, but I prefer the output of <code>glimpse()</code>):</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(msleep)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; Rows: 83
#&gt; Columns: 11
#&gt; $ name         &lt;chr&gt; "Cheetah", "Owl monkey", "Mountain beaver", "Greater s…
#&gt; $ genus        &lt;chr&gt; "Acinonyx", "Aotus", "Aplodontia", "Blarina", "Bos", "…
#&gt; $ vore         &lt;chr&gt; "carni", "omni", "herbi", "omni", "herbi", "herbi", "c…
#&gt; $ order        &lt;chr&gt; "Carnivora", "Primates", "Rodentia", "Soricomorpha", "…
#&gt; $ conservation &lt;chr&gt; "lc", NA, "nt", "lc", "domesticated", NA, "vu", NA, "d…
#&gt; $ sleep_total  &lt;dbl&gt; 12.1, 17.0, 14.4, 14.9, 4.0, 14.4, 8.7, 7.0, 10.1, 3.0…
#&gt; $ sleep_rem    &lt;dbl&gt; NA, 1.8, 2.4, 2.3, 0.7, 2.2, 1.4, NA, 2.9, NA, 0.6, 0.…
#&gt; $ sleep_cycle  &lt;dbl&gt; NA, NA, NA, 0.1333333, 0.6666667, 0.7666667, 0.3833333…
#&gt; $ awake        &lt;dbl&gt; 11.9, 7.0, 9.6, 9.1, 20.0, 9.6, 15.3, 17.0, 13.9, 21.0…
#&gt; $ brainwt      &lt;dbl&gt; NA, 0.01550, NA, 0.00029, 0.42300, NA, NA, NA, 0.07000…
#&gt; $ bodywt       &lt;dbl&gt; 50.000, 0.480, 1.350, 0.019, 600.000, 3.850, 20.490, 0…</code></pre>
</div>
</div>
<p>Finally, you can view summary statistics for each column using the <code>summary()</code> function:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(msleep)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;      name              genus               vore              order          
#&gt;  Length:83          Length:83          Length:83          Length:83         
#&gt;  Class :character   Class :character   Class :character   Class :character  
#&gt;  Mode  :character   Mode  :character   Mode  :character   Mode  :character  
#&gt;                                                                             
#&gt;                                                                             
#&gt;                                                                             
#&gt;                                                                             
#&gt;  conservation        sleep_total      sleep_rem      sleep_cycle    
#&gt;  Length:83          Min.   : 1.90   Min.   :0.100   Min.   :0.1167  
#&gt;  Class :character   1st Qu.: 7.85   1st Qu.:0.900   1st Qu.:0.1833  
#&gt;  Mode  :character   Median :10.10   Median :1.500   Median :0.3333  
#&gt;                     Mean   :10.43   Mean   :1.875   Mean   :0.4396  
#&gt;                     3rd Qu.:13.75   3rd Qu.:2.400   3rd Qu.:0.5792  
#&gt;                     Max.   :19.90   Max.   :6.600   Max.   :1.5000  
#&gt;                                     NA's   :22      NA's   :51      
#&gt;      awake          brainwt            bodywt        
#&gt;  Min.   : 4.10   Min.   :0.00014   Min.   :   0.005  
#&gt;  1st Qu.:10.25   1st Qu.:0.00290   1st Qu.:   0.174  
#&gt;  Median :13.90   Median :0.01240   Median :   1.670  
#&gt;  Mean   :13.57   Mean   :0.28158   Mean   : 166.136  
#&gt;  3rd Qu.:16.15   3rd Qu.:0.12550   3rd Qu.:  41.750  
#&gt;  Max.   :22.10   Max.   :5.71200   Max.   :6654.000  
#&gt;                  NA's   :27</code></pre>
</div>
</div>
<p>In summary, here is a non-exhaustive list of functions to get a sense of the content/structure of a data frame:</p>
<ul>
<li>Size:
<ul>
<li><code>dim(df)</code> - returns a vector with the number of rows in the first element, and the number of columns as the second element (the <strong>dim</strong>ensions of the object).</li>
<li><code>nrow(df)</code> - returns the number of rows.</li>
<li><code>ncol(df)</code> - returns the number of columns.</li>
</ul></li>
<li>Content:
<ul>
<li><code>head(df)</code> - shows the first 6 rows.</li>
<li><code>tail(df)</code> - shows the last 6 rows.</li>
</ul></li>
<li>Names:
<ul>
<li><code>names(df)</code> - returns the column names (synonym of <code>colnames()</code> for <code>data.frame</code> objects).</li>
<li><code>rownames(df)</code> - returns the row names.</li>
</ul></li>
<li>Summary:
<ul>
<li><code>glimpse(df)</code> or <code>str(df)</code> - structure of the object and information about the class, length and content of each column.</li>
<li><code>summary(df)</code> - summary statistics for each column.</li>
</ul></li>
</ul>
<p>Note: most of these functions are “generic”, they can be used on other types of objects besides <code>data.frame</code>.</p>
</section>
</section>
<section id="now-what" class="level2" data-number="11.4">
<h2 data-number="11.4" class="anchored" data-anchor-id="now-what"><span class="header-section-number">11.4</span> Now what?</h2>
<p>Now that you’ve got some data into R and are up to speed with what a data frame / tibble is, you may be asking, “so what now?” Well, over the next two lessons we will learn more about how to manipulate data frames and explore the underlying information with visualizations.</p>
<p>But just to give you an idea of where we’re going, here are a few pieces of information from the <code>msleep</code> dataset:</p>
<ol type="1">
<li>It appears that mammalian brain and body weight are logarithmically correlated - cool!</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(msleep, <span class="fu">aes</span>(<span class="at">x =</span> brainwt, <span class="at">y =</span> bodywt)) <span class="sc">+</span></span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">alpha=</span><span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stat_smooth</span>(<span class="at">method =</span> <span class="st">'lm'</span>, <span class="at">col =</span> <span class="st">'red'</span>, <span class="at">se =</span> <span class="cn">FALSE</span>, <span class="at">size =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb75-7"><a href="#cb75-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_log10</span>() <span class="sc">+</span></span>
<span id="cb75-8"><a href="#cb75-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb75-9"><a href="#cb75-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">'log(brain weight) in g'</span>,</span>
<span id="cb75-10"><a href="#cb75-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">'log(body weight) in kg'</span></span>
<span id="cb75-11"><a href="#cb75-11" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb75-12"><a href="#cb75-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figs/msleep-scatter1-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="576"></p>
</figure>
</div>
</div>
</div>
<ol start="2" type="1">
<li>It appears there may also be a negative, logarithmic relationship (albeit weaker) between the size of mammalian brains and how much they sleep - cool!</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(msleep, <span class="fu">aes</span>(<span class="at">x =</span> brainwt, <span class="at">y =</span> sleep_total)) <span class="sc">+</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_log10</span>() <span class="sc">+</span></span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stat_smooth</span>(<span class="at">method =</span> <span class="st">'lm'</span>, <span class="at">col =</span> <span class="st">'red'</span>, <span class="at">se =</span> <span class="cn">FALSE</span>, <span class="at">size =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb76-7"><a href="#cb76-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">'log(brain weight) in g'</span>,</span>
<span id="cb76-8"><a href="#cb76-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">'log(total sleep time) in hours'</span></span>
<span id="cb76-9"><a href="#cb76-9" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb76-10"><a href="#cb76-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figs/msleep-scatter2-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="576"></p>
</figure>
</div>
</div>
</div>
<ol start="3" type="1">
<li>Wow, there’s a lot of variation in how much different mammals sleep - cool!</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(msleep, <span class="fu">aes</span>(<span class="at">x =</span> sleep_total)) <span class="sc">+</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>() <span class="sc">+</span></span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">'Total sleep time in hours'</span>,</span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">'Histogram of total sleep time'</span></span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb77-7"><a href="#cb77-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figs/msleep-bars-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="576"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="page-sources" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="page-sources">Page sources</h2>
<p>Some content on this page has been modified from other courses, including:</p>
<ul>
<li><a href="https://datacarpentry.org/R-ecology-lesson/">Data Analysis and Visualization in R for Ecologists</a>, by François Michonneau &amp; Auriel Fournier. Zenodo: http://doi.org/10.5281/zenodo.3264888</li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/p4a\.jhelvy\.com\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./data-analysis.html" class="pagination-link" aria-label="Data Analysis">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Data Analysis</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./data-wrangling.html" class="pagination-link" aria-label="Data Wrangling">
        <span class="nav-page-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Data Wrangling</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Programming for Analytics in R was written by John Paul Helveston</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/jhelvy/p4a/edit/main/data-frames.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/jhelvy/p4a/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
<p>This book was built with <a href="https://quarto.org/">Quarto</a>.</p>
</div>
  </div>
</footer>




</body></html>